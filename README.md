# ğŸ“… Timely - Sistema de GestiÃ³n de Reservas y Negocios

<div align="center">

![Timely Logo](https://img.shields.io/badge/Timely-Sistema%20de%20Reservas-blue?style=for-the-badge)

**Plataforma completa para la gestiÃ³n eficiente de negocios y reservas**

[![Next.js](https://img.shields.io/badge/Next.js-14-black?style=flat-square&logo=next.js)](https://nextjs.org/)
[![NestJS](https://img.shields.io/badge/NestJS-10-E0234E?style=flat-square&logo=nestjs)](https://nestjs.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-blue?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-Auth%20%26%20DB-3ECF8E?style=flat-square&logo=supabase)](https://supabase.com/)

[Demo en Vivo](https://timely-omega-eight.vercel.app) 

</div>

---



## ğŸ¯ Sobre el Proyecto

**Timely** es una plataforma web moderna diseÃ±ada para revolucionar la forma en que los negocios gestionan sus reservas y citas. Combina una interfaz intuitiva con un backend robusto para ofrecer una soluciÃ³n completa de gestiÃ³n empresarial.

### Â¿Por quÃ© Timely?

En un mundo donde el tiempo es oro, Timely elimina la fricciÃ³n entre negocios y clientes, permitiendo una gestiÃ³n eficiente de horarios, citas y disponibilidad en tiempo real.

---

## ğŸ” ProblemÃ¡tica

### DesafÃ­os que Resuelve Timely

#### 1. **GestiÃ³n Manual Ineficiente**
- âŒ Registro de citas en cuadernos o hojas de cÃ¡lculo
- âŒ PÃ©rdida de informaciÃ³n por falta de respaldo
- âŒ Dificultad para coordinar mÃºltiples agendas
- âŒ Errores humanos en la programaciÃ³n de horarios

#### 2. **Falta de Visibilidad en Tiempo Real**
- âŒ Clientes no pueden ver horarios disponibles sin llamar
- âŒ Doble reserva del mismo horario
- âŒ Falta de recordatorios automÃ¡ticos
- âŒ Imposibilidad de gestionar mÃºltiples ubicaciones

#### 3. **Experiencia del Cliente Limitada**
- âŒ Procesos de reserva tediosos y lentos
- âŒ Falta de confirmaciones automÃ¡ticas
- âŒ Dificultad para reprogramar citas
- âŒ ComunicaciÃ³n ineficiente entre negocio y cliente

#### 4. **Escalabilidad del Negocio**
- âŒ Imposible gestionar mÃºltiples negocios desde un solo lugar
- âŒ Falta de mÃ©tricas y anÃ¡lisis de ocupaciÃ³n
- âŒ Dificultad para expandir operaciones
- âŒ Procesos manuales que no escalan

---

## âœ¨ CaracterÃ­sticas Principales

### Para Administradores de Negocios

#### ğŸ¢ GestiÃ³n Multi-Negocio
- Crear y administrar mÃºltiples negocios desde una Ãºnica cuenta
- ConfiguraciÃ³n personalizada por negocio (nombre, direcciÃ³n, telÃ©fono, informaciÃ³n)
- Dashboard centralizado con vista de todos tus negocios

#### ğŸ“… Sistema de Horarios Flexible
- Crear horarios disponibles por fecha y rango de horas
- Marcar horarios como disponibles o bloqueados
- EdiciÃ³n y eliminaciÃ³n de horarios en tiempo real
- VisualizaciÃ³n por calendario para mejor organizaciÃ³n

#### ğŸ‘¥ GestiÃ³n de Citas
- Ver todas las reservas por negocio
- Confirmar o cancelar citas
- Historial completo de reservas
- Notificaciones de nuevas reservas

#### ğŸ” Control de Acceso
- Sistema de roles (Admin/Cliente)
- Guards de seguridad a nivel de negocio
- ValidaciÃ³n de propiedad antes de modificaciones
- AutenticaciÃ³n mediante JWT de Supabase

### Para Clientes

#### ğŸ” ExploraciÃ³n de Negocios
- CatÃ¡logo completo de negocios disponibles
- InformaciÃ³n detallada de cada establecimiento
- BÃºsqueda y filtrado (prÃ³ximamente)

#### ğŸŸï¸ Reservas Simplificadas
- Ver horarios disponibles en tiempo real
- Reservar citas con un solo clic
- Modificar o cancelar reservas fÃ¡cilmente
- Historial personal de citas

#### ğŸ“± Perfil Personal
- Gestionar informaciÃ³n de contacto
- Actualizar preferencias
- Cambio de rol Admin/Cliente

---

## ğŸ Beneficios

### Para Negocios

| Beneficio | Impacto |
|-----------|---------|
| **Ahorro de Tiempo** | Reduce hasta un 70% el tiempo dedicado a gestiÃ³n de citas |
| **ReducciÃ³n de Errores** | Elimina dobles reservas y conflictos de horarios |
| **Accesibilidad 24/7** | Los clientes pueden reservar en cualquier momento |
| **Escalabilidad** | Gestiona 1 o 100 negocios con la misma facilidad |
| **ProfesionalizaciÃ³n** | Imagen moderna y tecnolÃ³gica del negocio |
| **AnÃ¡lisis de Datos** | MÃ©tricas claras de ocupaciÃ³n y demanda |

### Para Clientes

| Beneficio | Impacto |
|-----------|---------|
| **Comodidad** | Reserva desde cualquier dispositivo en segundos |
| **Transparencia** | Ve disponibilidad real sin llamadas |
| **Flexibilidad** | Reprograma citas fÃ¡cilmente |
| **Recordatorios** | Nunca olvides una cita (prÃ³ximamente) |
| **Historial** | Acceso a todas tus reservas pasadas y futuras |

---

## ğŸ› ï¸ TecnologÃ­as

### Frontend

```
Next.js 14          - Framework React con App Router
TypeScript          - Tipado estÃ¡tico para mayor seguridad
Tailwind CSS        - Estilos utility-first
Shadcn/ui           - Componentes UI accesibles
Lucide Icons        - IconografÃ­a moderna
```

### Backend

```
NestJS              - Framework Node.js escalable
TypeScript          - Desarrollo type-safe
Supabase Auth       - AutenticaciÃ³n y autorizaciÃ³n
Supabase Database   - PostgreSQL como base de datos
JWT                 - Tokens de autenticaciÃ³n seguros
```

### Infraestructura

```
Vercel              - Hosting del frontend
Render              - Hosting del backend
Supabase Cloud      - Base de datos y autenticaciÃ³n
GitHub              - Control de versiones
```

### Herramientas de Desarrollo

```
ESLint              - Linting de cÃ³digo
Prettier            - Formateo de cÃ³digo
pnpm                - GestiÃ³n de paquetes
Git                 - Control de versiones
```

---

## ğŸ—ï¸ Arquitectura del Sistema

### Diagrama de Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND                            â”‚
â”‚                      (Next.js + Vercel)                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Pages      â”‚  â”‚  Components  â”‚  â”‚   Services   â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ - Dashboard  â”‚  â”‚ - Navbar     â”‚  â”‚ - API calls  â”‚       â”‚
â”‚  â”‚ - Businesses â”‚  â”‚ - Cards      â”‚  â”‚ - Auth       â”‚       â”‚
â”‚  â”‚ - Schedules  â”‚  â”‚ - Forms      â”‚  â”‚ - Helpers    â”‚       â”‚
â”‚  â”‚ - Profile    â”‚  â”‚ - Modals     â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS/REST API
                            â”‚ Authorization: Bearer <JWT>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND                             â”‚
â”‚                      (NestJS + Render)                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Controllers  â”‚  â”‚   Services   â”‚  â”‚    Guards    â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ - Auth       â”‚  â”‚ - Business   â”‚  â”‚ - JWT Verify â”‚       â”‚
â”‚  â”‚ - Businesses â”‚  â”‚ - Schedules  â”‚  â”‚ - Owner      â”‚       â”‚
â”‚  â”‚ - Schedules  â”‚  â”‚ - Users      â”‚  â”‚ - Admin      â”‚       â”‚
â”‚  â”‚ - Users      â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ SQL Queries
                            â”‚ JWT Validation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SUPABASE                                â”‚
â”‚                  (PostgreSQL + Auth)                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Database   â”‚  â”‚     Auth     â”‚  â”‚   Storage    â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ - users      â”‚  â”‚ - JWT Secret â”‚  â”‚ - Files      â”‚       â”‚
â”‚  â”‚ - businesses â”‚  â”‚ - Sessions   â”‚  â”‚ - Images     â”‚       â”‚
â”‚  â”‚ - schedules  â”‚  â”‚ - Providers  â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ - bookings   â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚         â”‚ Backend  â”‚         â”‚ Supabase â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                    â”‚                     â”‚
     â”‚  Login Request     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
     â”‚                    â”‚  Validate Credentials
     â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                    â”‚                     â”‚
     â”‚                    â”‚    JWT Token        â”‚
     â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚   JWT Token        â”‚                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
     â”‚                    â”‚                     â”‚
     â”‚  API Request       â”‚                     â”‚
     â”‚  + Bearer Token    â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
     â”‚                    â”‚  Verify JWT         â”‚
     â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                    â”‚                     â”‚
     â”‚                    â”‚    Valid âœ“          â”‚
     â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚   Response         â”‚                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
     â”‚                    â”‚                     â”‚
```

### Flujo de CreaciÃ³n de Horario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin   â”‚    â”‚ Frontend â”‚    â”‚ Backend  â”‚    â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚                â”‚ 
     â”‚ Click "Nuevo  â”‚               â”‚                â”‚
     â”‚ Horario"      â”‚               â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚                â”‚
     â”‚               â”‚               â”‚                â”‚
     â”‚ Fill Form     â”‚               â”‚                â”‚
     â”‚ (date, time)  â”‚               â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚                â”‚
     â”‚               â”‚               â”‚                â”‚
     â”‚ Submit        â”‚ POST /schedules                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚
     â”‚               â”‚   + JWT Token  â”‚               â”‚
     â”‚               â”‚                â”‚               â”‚
     â”‚               â”‚                â”‚ Verify JWT    â”‚
     â”‚               â”‚                â”‚ Check Owner   â”‚
     â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”       â”‚
     â”‚               â”‚                â”‚       â”‚       â”‚
     â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”˜       â”‚
     â”‚               â”‚                â”‚               â”‚
     â”‚               â”‚                â”‚ INSERT INTO   â”‚
     â”‚               â”‚                â”‚  schedules    â”‚
     â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚                â”‚               â”‚
     â”‚               â”‚                â”‚    Success    â”‚
     â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚               â”‚   Schedule     â”‚               â”‚
     â”‚               â”‚    Created     â”‚               â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
     â”‚  Redirect to  â”‚                                â”‚
     â”‚  Schedules    â”‚                                â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚ 
                                                      â”‚
```

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### Prerrequisitos

- Node.js 18+ instalado
- pnpm (recomendado) o npm
- Cuenta en Supabase
- Git

### 1. Clonar el Repositorio

```bash
git clone https://github.com/tu-usuario/timely.git
cd timely
```

### 2. Configurar el Backend

```bash
cd timely-backend
npm install

# Crear archivo .env
cp .env.example .env
```

Configurar variables de entorno en `timely-backend/.env`:

```env
# Supabase
Supabase_Url=tu_url_de_supabase
Supabase_Key=tu_service_role_key
SUPABASE_JWT_SECRET=tu_jwt_secret

# Servidor
PORT=3000
NODE_ENV=development
```

Iniciar el backend:

```bash
npm run start:dev
```

### 3. Configurar el Frontend

```bash
cd timely-frontend
pnpm install

# Crear archivo .env.local
cp .env.example .env.local
```

Configurar variables de entorno en `timely-frontend/.env.local`:

```env
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=tu_url_de_supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=tu_anon_key
```

Iniciar el frontend:

```bash
pnpm dev
```

### 4. Configurar Base de Datos

Ejecutar las migraciones SQL en Supabase SQL Editor:

```sql
-- Crear tabla de negocios
CREATE TABLE businesses (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name VARCHAR(255) NOT NULL,
  address TEXT,
  phone VARCHAR(50),
  info TEXT,
  admin_id UUID REFERENCES auth.users(id),
  created_at TIMESTAMP DEFAULT NOW()
);

-- Crear tabla de horarios
CREATE TABLE schedules (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  business_id UUID REFERENCES businesses(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  start_time TIME NOT NULL,
  end_time TIME NOT NULL,
  available BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Crear tabla de estado de usuario
CREATE TABLE user_status (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  user_name VARCHAR(255),
  phone VARCHAR(50),
  role VARCHAR(50) DEFAULT 'cliente',
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 5. Acceder a la AplicaciÃ³n

- Frontend: http://localhost:3001
- Backend: http://localhost:3000
- Supabase Dashboard: https://app.supabase.com

---

## ğŸ“– Uso del Sistema

### Para Administradores

#### 1. Registro y Login

```
1. Ir a /register
2. Llenar formulario con:
   - Nombre
   - Email
   - ContraseÃ±a
   - TelÃ©fono (opcional)
   - Seleccionar rol: "Administrador"
3. Verificar email (si estÃ¡ habilitado en Supabase)
4. Iniciar sesiÃ³n en /login
```

#### 2. Crear un Negocio

```
1. Dashboard â†’ "Crear Negocio"
2. Llenar informaciÃ³n:
   - Nombre del negocio
   - DirecciÃ³n
   - TelÃ©fono
   - InformaciÃ³n adicional
3. Guardar
4. El negocio aparecerÃ¡ en "Mis Negocios"
```

#### 3. Gestionar Horarios

```
1. Mis Negocios â†’ Seleccionar negocio â†’ "Horarios"
2. Seleccionar fecha en el calendario
3. Click en "Nuevo Horario"
4. Configurar:
   - Fecha
   - Hora inicio (formato 24h: 09:00)
   - Hora fin (formato 24h: 17:00)
   - Marcar si estÃ¡ disponible
5. Guardar
```

#### 4. Editar/Eliminar Horarios

```
- Editar: Click en botÃ³n de ediciÃ³n â†’ Modificar â†’ Guardar
- Eliminar: Click en botÃ³n de eliminar â†’ Confirmar
```

### Para Clientes

#### 1. Explorar Negocios

```
1. Login como cliente
2. Ir a "Todos los Negocios"
3. Ver informaciÃ³n de cada negocio
```

#### 2. Hacer una Reserva

```
1. Seleccionar negocio
2. Ver horarios disponibles
3. Elegir fecha y hora
4. Confirmar reserva
5. Ver confirmaciÃ³n en "Mis Reservas"
```

---

## ğŸ“ Estructura del Proyecto

### Frontend (timely-frontend/)

```
timely-frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ appointments/          # GestiÃ³n de citas
â”‚   â”‚   â”œâ”€â”€ page.tsx          # Lista de citas
â”‚   â”‚   â””â”€â”€ new/              # Nueva cita
â”‚   â”œâ”€â”€ businesses/           # CatÃ¡logo de negocios
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ [id]/             # Detalle de negocio
â”‚   â”‚   â””â”€â”€ new/              # Crear negocio
â”‚   â”œâ”€â”€ my-businesses/        # Negocios del admin
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ [businessId]/
â”‚   â”‚       â””â”€â”€ schedules/    # GestiÃ³n de horarios
â”‚   â”œâ”€â”€ dashboard/            # Dashboard principal
â”‚   â”œâ”€â”€ login/                # Inicio de sesiÃ³n
â”‚   â”œâ”€â”€ register/             # Registro
â”‚   â””â”€â”€ profile/              # Perfil de usuario
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                   # Componentes Shadcn
â”‚   â”œâ”€â”€ navbar.tsx            # Barra de navegaciÃ³n
â”‚   â””â”€â”€ protected-route.tsx   # HOC de protecciÃ³n
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.ts                # Llamadas al backend
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ auth.ts               # LÃ³gica de autenticaciÃ³n
â”‚   â””â”€â”€ auth-utils.ts         # Utilidades de auth
â””â”€â”€ types/                    # Definiciones TypeScript
```

### Backend (timely-backend/)

```
timely-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â””â”€â”€ auth.dto.ts
â”‚   â”œâ”€â”€ businesses/
â”‚   â”‚   â”œâ”€â”€ businesses.controller.ts
â”‚   â”‚   â”œâ”€â”€ businesses.service.ts
â”‚   â”‚   â”œâ”€â”€ businesses.guard.ts    # JWT verification
â”‚   â”‚   â”œâ”€â”€ adminAccess.guard.ts   # Admin check
â”‚   â”‚   â””â”€â”€ checkOwner.guard.ts    # Ownership check
â”‚   â”œâ”€â”€ schedules/
â”‚   â”‚   â”œâ”€â”€ schedules.controller.ts
â”‚   â”‚   â”œâ”€â”€ schedules.service.ts
â”‚   â”‚   â”œâ”€â”€ schedules.guard.ts     # Owner verification
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â””â”€â”€ schedules.dto.ts
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â”œâ”€â”€ user.guard.ts          # User auth guard
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ supabase.cliente.ts    # Supabase config
â”‚   â”œâ”€â”€ app.module.ts              # MÃ³dulo principal
â”‚   â””â”€â”€ main.ts                    # Entry point
â””â”€â”€ test/                          # Tests E2E
```

---

## ğŸ”Œ API Endpoints

### AutenticaciÃ³n

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| POST | `/auth/register` | Registrar nuevo usuario | No |
| POST | `/auth/login` | Iniciar sesiÃ³n | No |

**Ejemplo Request (Register):**
```json
{
  "name": "Juan PÃ©rez",
  "email": "juan@example.com",
  "password": "password123",
  "phone": "+56912345678",
  "role": "admin"
}
```

**Response:**
```json
{
  "user": {
    "id": "uuid",
    "email": "juan@example.com",
    "user_metadata": {
      "name": "Juan PÃ©rez",
      "role": "admin"
    }
  },
  "session": {
    "access_token": "jwt_token",
    "refresh_token": "refresh_token"
  }
}
```

### Negocios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/businesses` | Listar todos los negocios | SÃ­ |
| GET | `/businesses/:id` | Obtener negocio especÃ­fico | SÃ­ |
| GET | `/businesses/admin/:userId` | Negocios del admin | SÃ­ |
| POST | `/businesses` | Crear negocio | SÃ­ (Admin) |
| PATCH | `/businesses/:id` | Actualizar negocio | SÃ­ (Owner) |
| DELETE | `/businesses/:id` | Eliminar negocio | SÃ­ (Owner) |

**Ejemplo Request (Create Business):**
```json
{
  "name": "PeluquerÃ­a MarÃ­a",
  "address": "Av. Principal 123",
  "phone": "+56912345678",
  "info": "Cortes y peinados profesionales"
}
```

### Horarios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/schedules/business/:businessId` | Horarios de un negocio | No |
| GET | `/schedules/business/:businessId?date=2024-01-15` | Horarios por fecha | No |
| POST | `/schedules/business/:businessId` | Crear horario | SÃ­ (Owner) |
| PATCH | `/schedules/:scheduleId` | Actualizar horario | SÃ­ (Owner) |
| DELETE | `/schedules/:scheduleId` | Eliminar horario | SÃ­ (Owner) |

**Ejemplo Request (Create Schedule):**
```json
{
  "date": "2024-01-15",
  "start_time": "09:00",
  "end_time": "17:00",
  "available": true
}
```

### Usuarios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/users/me` | Perfil del usuario actual | SÃ­ |
| PATCH | `/users/me` | Actualizar perfil | SÃ­ |
| GET | `/users/:id` | Obtener usuario por ID | SÃ­ (Admin) |

---

## ğŸ” Seguridad

### Sistema de Guards

#### 1. **BusinessesGuard** (JWT Verification)
```typescript
// Verifica que el token JWT sea vÃ¡lido
// Decodifica el payload y asigna user al request
// Usado en todos los endpoints protegidos
```

#### 2. **AdminBusinessGuard** (Role Check)
```typescript
// Verifica que el usuario tenga rol 'admin'
// Necesario para crear negocios
```

#### 3. **CheckOwnerGuard** (Ownership Verification)
```typescript
// Verifica que el usuario sea propietario del negocio
// Previene modificaciones no autorizadas
```

#### 4. **SchedulesOwnerGuard** (Schedule Ownership)
```typescript
// Verifica que el usuario sea dueÃ±o del negocio
// Antes de crear/editar/eliminar horarios
```

### Flujo de Seguridad

```
Request â†’ JWT Guard â†’ Role Guard â†’ Owner Guard â†’ Controller â†’ Service â†’ DB
         â†“           â†“             â†“
      Verify JWT   Check Role   Verify Owner
```

### Variables de Entorno Sensibles

**Backend:**
```env
SUPABASE_JWT_SECRET=*****     # âš ï¸ CRÃTICO: Nunca exponer
Supabase_Key=*****            # âš ï¸ Service Role Key
```

**Frontend:**
```env
NEXT_PUBLIC_SUPABASE_ANON_KEY=*****  # âœ… PÃºblica, pero limitada
```

---

## ğŸ—ºï¸ Roadmap

### Fase 1: MVP âœ… (Completado)
- [x] Sistema de autenticaciÃ³n
- [x] CRUD de negocios
- [x] CRUD de horarios
- [x] Roles de usuario (Admin/Cliente)
- [x] Guards de seguridad
- [x] Interfaz responsiva

### Fase 2: Mejoras de UX (En Progreso)
- [ ] BÃºsqueda y filtrado de negocios
- [ ] Notificaciones en tiempo real
- [ ] Sistema de confirmaciÃ³n de citas
- [ ] Calendario interactivo mejorado
- [ ] Modo oscuro

### Fase 3: Features Avanzados
- [ ] Sistema de notificaciones por email
- [ ] Recordatorios automÃ¡ticos de citas
- [ ] IntegraciÃ³n con Google Calendar
- [ ] Sistema de reseÃ±as y calificaciones
- [ ] Chat en vivo entre cliente y negocio
- [ ] Pagos integrados

### Fase 4: Analytics y Reportes
- [ ] Dashboard de mÃ©tricas para admins
- [ ] Reportes de ocupaciÃ³n
- [ ] EstadÃ­sticas de reservas
- [ ] AnÃ¡lisis de tendencias
- [ ] ExportaciÃ³n de datos

### Fase 5: Escalabilidad
- [ ] App mÃ³vil (React Native)
- [ ] API pÃºblica para integraciones
- [ ] Sistema de plugins
- [ ] Multi-idioma
- [ ] Multi-tenant architecture

---

## ğŸ¤ Contribuir

Â¡Las contribuciones son bienvenidas! Si deseas colaborar:

### 1. Fork el Proyecto

```bash
git clone https://github.com/tu-usuario/timely.git
cd timely
```

### 2. Crear una Rama

```bash
git checkout -b feature/nueva-funcionalidad
```

### 3. Realizar Cambios

```bash
# Hacer tus cambios
git add .
git commit -m "Add: nueva funcionalidad increÃ­ble"
```

### 4. Push y Pull Request

```bash
git push origin feature/nueva-funcionalidad
```

Luego crea un Pull Request en GitHub.

### GuÃ­a de Estilo

- Usar TypeScript para type safety
- Seguir convenciones de ESLint y Prettier
- Escribir cÃ³digo autodocumentado
- Agregar comentarios para lÃ³gica compleja
- Seguir el patrÃ³n de arquitectura existente

---

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la licencia **MIT**.

```
MIT License

Copyright (c) 2024 Timely

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---


<div align="center">

â­ Si te gusta este proyecto, Â¡dale una estrella en GitHub!

[â¬† Volver arriba](#-timely---sistema-de-gestiÃ³n-de-reservas-y-negocios)

</div>
